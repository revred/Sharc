# EditorConfig helps developers define and maintain consistent
# coding styles between different editors and IDEs.
# https://editorconfig.org

root = true

# ── Global defaults ──────────────────────────────────────────────
[*]
end_of_line = lf
insert_final_newline = true
trim_trailing_whitespace = true
charset = utf-8

# ── C# source files ─────────────────────────────────────────────
[*.cs]
indent_style = space
indent_size = 4

# --- Naming conventions ---
dotnet_naming_rule.private_fields_underscore.symbols  = private_fields
dotnet_naming_rule.private_fields_underscore.style    = underscore_prefix
dotnet_naming_rule.private_fields_underscore.severity = suggestion

dotnet_naming_symbols.private_fields.applicable_kinds           = field
dotnet_naming_symbols.private_fields.applicable_accessibilities = private, internal, private_protected
dotnet_naming_symbols.private_fields.required_modifiers         =

dotnet_naming_style.underscore_prefix.capitalization  = camel_case
dotnet_naming_style.underscore_prefix.required_prefix = _

dotnet_naming_rule.public_members_pascal.symbols  = public_members
dotnet_naming_rule.public_members_pascal.style    = pascal_style
dotnet_naming_rule.public_members_pascal.severity = suggestion

dotnet_naming_symbols.public_members.applicable_kinds           = property, method, event, delegate, class, struct, enum
dotnet_naming_symbols.public_members.applicable_accessibilities = public

dotnet_naming_style.pascal_style.capitalization = pascal_case

dotnet_naming_rule.interfaces_prefix.symbols  = interface_types
dotnet_naming_rule.interfaces_prefix.style    = interface_style
dotnet_naming_rule.interfaces_prefix.severity = suggestion

dotnet_naming_symbols.interface_types.applicable_kinds = interface

dotnet_naming_style.interface_style.capitalization  = pascal_case
dotnet_naming_style.interface_style.required_prefix = I

dotnet_naming_rule.constants_pascal.symbols  = constant_fields
dotnet_naming_rule.constants_pascal.style    = pascal_style
dotnet_naming_rule.constants_pascal.severity = suggestion

dotnet_naming_symbols.constant_fields.applicable_kinds           = field
dotnet_naming_symbols.constant_fields.required_modifiers         = const

# --- Code style ---
csharp_style_namespace_declarations                          = file_scoped:suggestion
csharp_style_var_for_built_in_types                          = true:silent
csharp_style_var_when_type_is_apparent                       = true:suggestion
csharp_style_var_elsewhere                                   = true:silent
csharp_prefer_braces                                         = true:suggestion
csharp_style_prefer_switch_expression                        = true:suggestion
csharp_style_prefer_pattern_matching                         = true:suggestion
csharp_style_prefer_not_pattern                              = true:suggestion
csharp_style_prefer_extended_property_pattern                = true:suggestion
csharp_style_expression_bodied_methods                       = when_on_single_line:silent
csharp_style_expression_bodied_properties                    = true:suggestion
csharp_style_expression_bodied_accessors                     = true:suggestion
csharp_style_expression_bodied_constructors                  = false:silent
csharp_style_expression_bodied_operators                     = when_on_single_line:silent
csharp_prefer_simple_using_statement                         = true:suggestion
csharp_style_prefer_readonly_struct                          = true:suggestion
csharp_style_prefer_utf8_string_literals                     = true:suggestion

# --- Formatting ---
csharp_new_line_before_open_brace                            = all
csharp_new_line_before_else                                  = true
csharp_new_line_before_catch                                 = true
csharp_new_line_before_finally                               = true
csharp_indent_case_contents                                  = true
csharp_indent_switch_labels                                  = true
csharp_space_after_cast                                      = false
csharp_space_after_keywords_in_control_flow_statements       = true
dotnet_sort_system_directives_first                          = true
dotnet_separate_import_directive_groups                       = false

# --- Analyzer severity overrides ---
dotnet_diagnostic.CA1062.severity = none          # Null-check on public params (handled by NRT)
dotnet_diagnostic.CA1303.severity = none          # Do not pass literals as localized parameters
dotnet_diagnostic.CA1848.severity = none          # LoggerMessage delegates (overkill for this project)
dotnet_diagnostic.CA2007.severity = suggestion    # ConfigureAwait
dotnet_diagnostic.IDE0005.severity = suggestion    # Remove unnecessary using directives
dotnet_diagnostic.IDE0090.severity = suggestion   # Simplify new expression (target-typed new)

# --- LLM-friendly readability + complexity profile (non-breaking) ---
# Keep severity at suggestion to preserve existing build stability under TreatWarningsAsErrors.
max_line_length = 140

# Readability / maintainability
dotnet_diagnostic.CA1502.severity = suggestion    # Avoid excessive cyclomatic complexity
dotnet_diagnostic.CA1505.severity = suggestion    # Avoid unmaintainable code
dotnet_diagnostic.CA1506.severity = suggestion    # Avoid excessive class coupling
dotnet_diagnostic.CA1510.severity = suggestion    # Use throw helper methods
dotnet_diagnostic.CA1511.severity = suggestion    # Use argument exception throw helper methods
dotnet_diagnostic.CA1512.severity = suggestion    # Use argument out of range throw helper methods
dotnet_diagnostic.CA1513.severity = suggestion    # Use object disposed exception throw helper methods
dotnet_diagnostic.CA1851.severity = suggestion    # Prefer avoiding multiple enumeration

# Potential runtime improvements with clearer intent
dotnet_diagnostic.CA1827.severity = suggestion    # Do not use Count/LongCount when Any can be used
dotnet_diagnostic.CA1828.severity = suggestion    # Do not use CountAsync/LongCountAsync when AnyAsync can be used
dotnet_diagnostic.CA1829.severity = suggestion    # Use Length/Count property instead of Count()
dotnet_diagnostic.CA1836.severity = suggestion    # Prefer IsEmpty over Count
dotnet_diagnostic.CA1845.severity = suggestion    # Use span-based string.Concat
dotnet_diagnostic.CA1846.severity = suggestion    # Prefer AsSpan over Substring
dotnet_diagnostic.CA1854.severity = suggestion    # Prefer IDictionary.TryGetValue
dotnet_diagnostic.CA1860.severity = suggestion    # Avoid Enumerable.Any extension method
dotnet_diagnostic.CA1862.severity = suggestion    # Use StringComparison overloads
dotnet_diagnostic.CA1864.severity = suggestion    # Prefer TryAdd over ContainsKey + Add

# C# style rules that improve scanability in smaller context windows
dotnet_style_prefer_collection_expression = true:suggestion
dotnet_style_prefer_null_check_over_type_check = true:suggestion
csharp_style_prefer_method_group_conversion = true:suggestion
csharp_style_prefer_top_level_statements = false:silent

# ── Razor files ──────────────────────────────────────────────────
[*.razor]
indent_style = space
indent_size = 4

# ── XML / MSBuild / props / targets ─────────────────────────────
[*.{xml,csproj,props,targets}]
indent_style = space
indent_size = 2

# ── JSON ─────────────────────────────────────────────────────────
[*.json]
indent_style = space
indent_size = 2

# ── YAML / GitHub Actions ───────────────────────────────────────
[*.{yml,yaml}]
indent_style = space
indent_size = 2

# ── Markdown ─────────────────────────────────────────────────────
[*.md]
trim_trailing_whitespace = false

# ── Shell scripts ────────────────────────────────────────────────
[*.sh]
indent_style = space
indent_size = 2

# ── Solution files ───────────────────────────────────────────────
[*.sln]
indent_style = tab
